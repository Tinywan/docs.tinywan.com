<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>3 - 变量 - 万物联网服务平台</title>
    
    
    
    
</head>
<body>
<div id="root"></div>
<script type="application/payload+json">
{"id":"yWP4GW","summary":[{"id":"","title":"第0章 远程安装","articles":[]},{"id":"","title":"第1章 介绍和安装","articles":[{"title":"1 - 介绍和安装","ref":"\/docs\/golang_tutorial_01.md","path":"\/docs\/golang_tutorial_01.html","children":[]},{"title":"2 - Hello World ","ref":"\/docs\/golang_tutorial_02.md","path":"\/docs\/golang_tutorial_02.html","children":[]}]},{"id":"","title":"第2章 变量、类型和常量","articles":[{"title":"3 - 变量","ref":"\/docs\/golang_tutorial_03.md","path":"\/docs\/golang_tutorial_03.html","children":[]},{"title":"4 - 类型","ref":"\/docs\/golang_tutorial_04.md","path":"\/docs\/golang_tutorial_04.html","children":[]},{"title":"5 - 常量","ref":"\/docs\/golang_tutorial_05.md","path":"\/docs\/golang_tutorial_05.html","children":[]}]},{"id":"","title":"第3章 函数和包","articles":[{"title":"6 - 函数","ref":"\/docs\/golang_tutorial_06.md","path":"\/docs\/golang_tutorial_06.html","children":[]},{"title":"7 - 包","ref":"\/docs\/golang_tutorial_07.md","path":"\/docs\/golang_tutorial_07.html","children":[]}]},{"id":"","title":"第4章 条件和循环语句","articles":[{"title":"8 - if else 语句","ref":"\/docs\/golang_tutorial_08.md","path":"\/docs\/golang_tutorial_08.html","children":[]},{"title":"9 - 循环语句","ref":"\/docs\/golang_tutorial_09.md","path":"\/docs\/golang_tutorial_09.html","children":[]},{"title":"10 - switch语句","ref":"\/docs\/golang_tutorial_10.md","path":"\/docs\/golang_tutorial_10.html","children":[]}]},{"id":"","title":"第5章 数组、切片和变参函数","articles":[{"title":"11 - 数组和切片","ref":"\/docs\/golang_tutorial_11.md","path":"\/docs\/golang_tutorial_11.html","children":[]},{"title":"12 - 变 参函数","ref":"\/docs\/golang_tutorial_12.md","path":"\/docs\/golang_tutorial_12.html","children":[]}]},{"id":"","title":"第6章 更多的类型","articles":[{"title":"13 - Map","ref":"\/docs\/golang_tutorial_13.md","path":"\/docs\/golang_tutorial_13.html","children":[]},{"title":"14 - 字符串","ref":"\/docs\/golang_tutorial_14.md","path":"\/docs\/golang_tutorial_14.html","children":[]}]},{"id":"","title":"第7章 指针、结构体和方法","articles":[{"title":"15 - 指针","ref":"\/docs\/golang_tutorial_15.md","path":"\/docs\/golang_tutorial_15.html","children":[]},{"title":"16 -  结构体","ref":"\/docs\/golang_tutorial_16.md","path":"\/docs\/golang_tutorial_16.html","children":[]},{"title":"17 -  方法","ref":"\/docs\/golang_tutorial_17.md","path":"\/docs\/golang_tutorial_17.html","children":[]}]},{"id":"","title":"第8章 接口","articles":[]},{"id":"","title":"第9章 并发","articles":[{"title":" 21 - 协程","ref":"\/docs\/golang_tutorial_21.md","path":"\/docs\/golang_tutorial_21.html","children":[]}]},{"id":"","title":"第10章 面向对象编程","articles":[]},{"id":"","title":"第11章 延迟和错误处理","articles":[{"title":"35 - 读文件","ref":"\/docs\/golang_tutorial_35.md","path":"\/docs\/golang_tutorial_35.html","children":[]}]},{"id":"","title":"文档","articles":[{"title":"如何编写 Go代码","ref":"\/docs\/how_to_write_go_code.md","path":"\/docs\/how_to_write_go_code.html","children":[]}]}],"config":{"pluginsConfig":{"theme-default":{"auto_open":true,"navs":[{"title":"ThinkAPI","url":"https:\/\/docs.topthink.com\/think-api\/1835085"},{"title":"Tinywan","url":"https:\/\/market.topthink.com\/website"}]}},"title":"万物联网服务平台","plugins":["highlight","comment"],"theme":"classic"},"file":{"path":"\/docs\/golang_tutorial_03.html","content":"3 - 变量\n========================\n\n上一节：[第二篇  Hello World](\/docs\/golang_tutorial_02.md)   \n下一节：[第四篇  类型](\/docs\/golang_tutorial_04.md)   \n\n这是本Golang系列教程的第三篇。  \n\n除了亲自写代码以外没有更好的方式来学习一门新的编程语言。在这篇教程中我们将开始编写我们的第一个程序。  \n\n## 什么是变量  \n\n变量（Variable）是给某个内存地址起的一个名字。我们用变量来存储某个特定类型的值。在 Go 中有多种声明变量的语法。  \n\n##  声明单一变量  \n\n声明一个变量的语法为：`var name type`，例如：  \n\n```golang\npackage main\n\nimport \"fmt\"\n\nfunc main() {  \n    var age int \/\/ variable declaration\n    fmt.Println(\"my age is\", age)\n}\n```\n\n语句 `var age int` 声明了一个类型为 int，名称为 age 的变量。在这里我们没有给它赋任何值。如果一个变量没有被赋予任何值，Go 会自动将这个变量初始化为其类型的 0值，比如这里的 age 将被赋值为 0（`译者注：int的0值为0`）。运行这个程序，将得到如下输出：  \n\n```golang\nmy age is 0\n```\n\n一个变量可以被赋予其类型的任何值。例如，在上例中，age 可以被赋予任何整型值:  \n\n```golang\npackage main\n\nimport \"fmt\"\n\nfunc main() {  \n    var age int \/\/ variable declaration\n    fmt.Println(\"my age is \", age)\n    age = 24 \/\/assignment\n    fmt.Println(\"my age is\", age)\n    age = 28 \/\/assignment\n    fmt.Println(\"my new age is\", age)\n}\n```\n\n上面的程序输出如下：  \n```golang\nmy age is  0\nmy age is 24\nmy new age is 28\n```\n\n## 声明一个带初值的变量  \n\n在声明变量时可以指定其初始值。  \n\n声明一个带初值的变量的语法为：`var name type = initialvalue`，例如：  \n\n```golang\npackage main\n\nimport \"fmt\"\n\nfunc main() {  \n    var age int = 29 \/\/ variable declaration with initial value\n\n    fmt.Println(\"my age is\", age)\n}\n```\n\n在上面的程序中， age 是一个 int 型的变量，初始值为 29。运行上面的程序，输出如下。可以看到 age 的初始值确实为 29。  \n\n```golang\nmy age is 29\n```\n\n## 类型推导\n\n如果声明一个变量时提供了初始值，Go可以根据该初始值来自动推导变量的类型。因此如果声明变量时提供了初始值，就可以不必指定其类型。  \n\n也就是说，如果声明变量的形式为：`var name = initialvalue`，Go将根据 initialvalue 自动推导变量 name 的类型。  \n\n在下面的例子中，你可以看到声明变量 age 时并没有指定其类型。因为 age 的初值为 29，Go 自动推断其类型为 int。  \n\n```golang\npackage main\n\nimport \"fmt\"\n\nfunc main() {  \n    var age = 29 \/\/ type will be inferred\n\n    fmt.Println(\"my age is\", age)\n}\n```\n\n## 多变量声明\n\n多个变量可以在一条语句中声明。  \n\n多变量声明的语法为：`var name1, name2 type = initialvalue1, initialvalue2`，例如：  \n\n```golang\npackage main\n\nimport \"fmt\"\n\nfunc main() {  \n    var width, height int = 100, 50 \/\/declaring multiple variables\n\n    fmt.Println(\"width is\", width, \"height is\", height)\n}\n```\n\n如果指定了初始值，**则 type 可以省略**。下面的程序利用类型推导声明了多个变量：  \n\n```golang\npackage main\n\nimport \"fmt\"\n\nfunc main() {  \n    var width, height = 100, 50 \/\/\"int\" is dropped\n\n    fmt.Println(\"width is\", width, \"height is\", height)\n}\n```\n\n运行上面的程序，可以看到输出结果为 :  \n\n```golang\nwidth is 100 height is 50\n```\n\n正如你猜想的那样，如果不指定 width 和 height 的初值，它们将自动被赋值为 0，也就是说它们将以 0 作为初值：  \n\n```golang\npackage main\n\nimport \"fmt\"\n\nfunc main() {  \n    var width, height int\n    fmt.Println(\"width is\", width, \"height is\", height)\n    width = 100\n    height = 50\n    fmt.Println(\"new width is\", width, \"new height is \", height)\n}\n```\n\n上面的程序将会输出：  \n\n```golang\nwidth is 0 height is 0  \nnew width is 100 new height is  50 \n```\n\n有些时候我们需要在一条语句中**声明多个不同类型的变量**。我们可以使用下面的语法达到此目的：  \n```golang\nvar (  \n      name1 = initialvalue1,\n      name2 = initialvalue2\n)\n```\n\n下面的程序就用上面的语法声明了多个不同类型的变量：  \n\n```golang\npackage main\n\nimport \"fmt\"\n\nfunc main() {  \n    var (\n        name   = \"naveen\"\n        age    = 29\n        height int\n    )\n    fmt.Println(\"my name is\", name, \", age is\", age, \"and height is\", height)\n}\n```\n\n这里我们声明了一个字符串类型的变量 name，以及两个整型的变量 age 和 height。（我们将在下一篇教程中讨论 Golang 中可用的类型）。运行上面的程序将会产生如下输出：  \n\n```golang\nmy name is naveen , age is 29 and height is 0\n```\n\n## 简短声明  \n\nGo 也支持一种声明变量的简洁形式，称为简短声明（Short Hand Declaration），该声明使用了 `:=` 操作符。   \n\n声明变量的简短语法是 `name := initialvalue`。例如：\n\n```golang\npackage main\n\nimport \"fmt\"\n\nfunc main() {  \n    name, age := \"naveen\", 29 \/\/short hand declaration\n\n    fmt.Println(\"my name is\", name, \"age is\", age)\n}\n```\n\n运行上面的程序，输出如下：  \n\n```golang\nmy name is naveen age is 29\n```\n\n简短声明要求 ` := ` 操作符左边的所有变量都有初始值。下面程序将会抛出错误 `cannot assign 1 values to 2 variables`，这是因为 age 没有被赋值。  \n\n```golang\npackage main\n\nimport \"fmt\"\n\nfunc main() {  \n    name, age := \"naveen\" \/\/error\n\n    fmt.Println(\"my name is\", name, \"age is\", age)\n}\n```\n\n简短声明的语法要求 `:= `操作符的左边至少有一个变量是尚未声明的。考虑下面的程序：  \n\n```golang\npackage main\n\nimport \"fmt\"\n\nfunc main() {\n    a, b := 20, 30 \/\/ 声明变量a和b\n    fmt.Println(\"a is\", a, \"b is\", b)\n    \n    b, c := 40, 50 \/\/ b已经声明，但c尚未声明\n    fmt.Println(\"b is\", b, \"c is\", c)\n    \n    b, c = 80, 90 \/\/ 给已经声明的变量b和c赋新值\n    fmt.Println(\"changed b is\", b, \"c is\", c)\n}\n```\n\n上面的程序中，在 `b, c := 40, 50 ` 这一行，虽然变量 b 在之前已经被声明了，但是 c 却是新声明的变量，**因此这是合法的**。该程序的输出为：    \n\n```golang\na is 20 b is 30  \nb is 40 c is 50  \nchanged b is 80 c is 90 \n```\n\n但是当我们运行下面的程序  \n\n```golang\npackage main\n\nimport \"fmt\"\n\nfunc main() {  \n    a, b := 20, 30 \/\/a and b declared\n    fmt.Println(\"a is\", a, \"b is\", b)\n    a, b := 40, 50 \/\/error, no new variables\n}\n```\n\n将会报错：`no new variables on left side of :=` 。这是因为变量 a 和变量 b 都是已经声明过的变量，在` :=` 左侧并没有新的变量被声明。（重要）  \n\n**注意：简短声明只能用在函数中**  \n\n变量可以被赋予运行时产生的值。考虑下面的程序：  \n\n```golang\npackage main\n\nimport (  \n    \"fmt\"\n    \"math\"\n)\n\nfunc main() {  \n    a, b := 145.8, 543.8\n    c := math.Min(a, b) \/\/ 运行时产生的值\n    fmt.Println(\"minimum value is \", c)\n}\n```\n\n在上面的程序中， c 的值为 a 和 b 的最小值，该值是在运行时计算的。  \n\n一个变量不能被赋予与其类型不同的值。下面的程序将报错：`cannot use \"naveen\" (type string) as type int in assignment`。这是因为 age 被声明为 int 类型，但是我们试图将 string 类型的值赋给它。  \n\n```golang\npackage main\n\nfunc main() {  \n    age := 29      \/\/ age is int\n    age = \"naveen\" \/\/ error since we are trying to assign a string to a variable of type int\n}\n```\n\n本文由 [GCTT](https:\/\/github.com\/studygolang\/GCTT) 原创翻译，[Go语言中文网](https:\/\/studygolang.com\/)首发。\n\n","meta":{"mtime":""}}}
</script>

    <script src="../tmp/book/624c24de5f335/asset/lodash/lodash.min.js?v=4.17.21"></script>

    <script src="../tmp/book/624c24de5f335/asset/react/react.production.min.js?v=17.0.2"></script>

    <script src="../tmp/book/624c24de5f335/asset/react-dom/react-dom.production.min.js?v=17.0.2"></script>

    <script src="../tmp/book/624c24de5f335/asset/reader/index.js?v=1.0.24"></script>

    <script src="../tmp/book/624c24de5f335/asset/plugins/comment/index.js?v=0.0.1"></script>

    <script src="../tmp/book/624c24de5f335/asset/plugins/highlight/index.js?v=1.0.0"></script>

    <script src="../tmp/book/624c24de5f335/asset/plugins/theme-classic/index.js?v=1.0.2"></script>

<script type="text/javascript">
    TopWrite.bootstrap();
</script>
</body>
</html>
