<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>10 - switch语句 - 万物联网服务平台</title>
    
    
    
    
</head>
<body>
<div id="root"></div>
<script type="application/payload+json">
{"id":"yWP4GW","summary":[{"id":"","title":"第0章 远程安装","articles":[]},{"id":"","title":"第1章 介绍和安装","articles":[{"title":"1 - 介绍和安装","ref":"\/docs\/golang_tutorial_01.md","path":"\/docs\/golang_tutorial_01.html","children":[]},{"title":"2 - Hello World ","ref":"\/docs\/golang_tutorial_02.md","path":"\/docs\/golang_tutorial_02.html","children":[]}]},{"id":"","title":"第2章 变量、类型和常量","articles":[{"title":"3 - 变量","ref":"\/docs\/golang_tutorial_03.md","path":"\/docs\/golang_tutorial_03.html","children":[]},{"title":"4 - 类型","ref":"\/docs\/golang_tutorial_04.md","path":"\/docs\/golang_tutorial_04.html","children":[]},{"title":"5 - 常量","ref":"\/docs\/golang_tutorial_05.md","path":"\/docs\/golang_tutorial_05.html","children":[]}]},{"id":"","title":"第3章 函数和包","articles":[{"title":"6 - 函数","ref":"\/docs\/golang_tutorial_06.md","path":"\/docs\/golang_tutorial_06.html","children":[]},{"title":"7 - 包","ref":"\/docs\/golang_tutorial_07.md","path":"\/docs\/golang_tutorial_07.html","children":[]}]},{"id":"","title":"第4章 条件和循环语句","articles":[{"title":"8 - if else 语句","ref":"\/docs\/golang_tutorial_08.md","path":"\/docs\/golang_tutorial_08.html","children":[]},{"title":"9 - 循环语句","ref":"\/docs\/golang_tutorial_09.md","path":"\/docs\/golang_tutorial_09.html","children":[]},{"title":"10 - switch语句","ref":"\/docs\/golang_tutorial_10.md","path":"\/docs\/golang_tutorial_10.html","children":[]}]},{"id":"","title":"第5章 数组、切片和变参函数","articles":[{"title":"11 - 数组和切片","ref":"\/docs\/golang_tutorial_11.md","path":"\/docs\/golang_tutorial_11.html","children":[]},{"title":"12 - 变 参函数","ref":"\/docs\/golang_tutorial_12.md","path":"\/docs\/golang_tutorial_12.html","children":[]}]},{"id":"","title":"第6章 更多的类型","articles":[{"title":"13 - Map","ref":"\/docs\/golang_tutorial_13.md","path":"\/docs\/golang_tutorial_13.html","children":[]},{"title":"14 - 字符串","ref":"\/docs\/golang_tutorial_14.md","path":"\/docs\/golang_tutorial_14.html","children":[]}]},{"id":"","title":"第7章 指针、结构体和方法","articles":[{"title":"15 - 指针","ref":"\/docs\/golang_tutorial_15.md","path":"\/docs\/golang_tutorial_15.html","children":[]},{"title":"16 -  结构体","ref":"\/docs\/golang_tutorial_16.md","path":"\/docs\/golang_tutorial_16.html","children":[]},{"title":"17 -  方法","ref":"\/docs\/golang_tutorial_17.md","path":"\/docs\/golang_tutorial_17.html","children":[]}]},{"id":"","title":"第8章 接口","articles":[]},{"id":"","title":"第9章 并发","articles":[{"title":" 21 - 协程","ref":"\/docs\/golang_tutorial_21.md","path":"\/docs\/golang_tutorial_21.html","children":[]}]},{"id":"","title":"第10章 面向对象编程","articles":[]},{"id":"","title":"第11章 延迟和错误处理","articles":[{"title":"35 - 读文件","ref":"\/docs\/golang_tutorial_35.md","path":"\/docs\/golang_tutorial_35.html","children":[]}]},{"id":"","title":"文档","articles":[{"title":"如何编写 Go代码","ref":"\/docs\/how_to_write_go_code.md","path":"\/docs\/how_to_write_go_code.html","children":[]}]}],"config":{"pluginsConfig":{"theme-default":{"auto_open":true,"navs":[{"title":"ThinkAPI","url":"https:\/\/docs.topthink.com\/think-api\/1835085"},{"title":"Tinywan","url":"https:\/\/market.topthink.com\/website"}]}},"title":"万物联网服务平台","plugins":["highlight","comment"],"theme":"classic"},"file":{"path":"\/docs\/golang_tutorial_10.html","content":"10 - switch 语句  \n========================\n\n上一节：[第九篇 循环语句](\/docs\/golang_tutorial_09.md)   \n下一节：[第十一篇 数组和切片](\/docs\/golang_tutorial_11.md)  \n\n这是本Golang系列教程的第10篇。  \n\nswitch 是一个条件语句，用于将一个表达式的求值结果与可能的值的列表进行匹配，并根据匹配结果执行相应的代码。可以认为 `switch` 语句是编写多个 `if-else `子句的替代方式。  \n\n举例是说明问题最好的方式，让我们写一个简单的程序，输入手指编号，输出对应的手指称：）。例如 0 表示拇指，1 表示食指等。  \n\n```golang\npackage main\n\nimport (  \n    \"fmt\"\n)\n\nfunc main() {  \n    finger := 4\n    switch finger {\n    case 1:\n        fmt.Println(\"Thumb\")\n    case 2:\n        fmt.Println(\"Index\")\n    case 3:\n        fmt.Println(\"Middle\")\n    case 4:\n        fmt.Println(\"Ring\")\n    case 5:\n        fmt.Println(\"Pinky\")\n    }\n}\n```\n\n在上面的程序中，case 语句依次（从上到下）求值并与 `finger` 进行匹配，直到找到第一个与 `finger` 匹配的 case，并执行其中的代码。在这里 `finger` 的值为 4，因此打印 `Ring`。  \n\n多个有相同值的 case 是不允许的。如果你运行下面的程序，编译将会报错：`duplicate case 4 in switch`。  \n\n```golang\npackage main\n\nimport (  \n    \"fmt\"\n)\n\nfunc main() {  \n    finger := 4\n    switch finger {\n    case 1:\n        fmt.Println(\"Thumb\")\n    case 2:\n        fmt.Println(\"Index\")\n    case 3:\n        fmt.Println(\"Middle\")\n    case 4:\n        fmt.Println(\"Ring\")\n    case 4:\/\/duplicate case\n        fmt.Println(\"Another Ring\")\n    case 5:\n        fmt.Println(\"Pinky\")\n    }\n}\n```\n\n## default case  \n\n我们每只手只有 5 根手指，但是如果我们输入一个错误的手指序号会发生什么呢？这里就要用到 `default` 语句了。当没有其他 case 匹配时，将执行 default 语句。  \n\n```golang\npackage main\n\nimport (  \n    \"fmt\"\n)\n\nfunc main() {  \n    switch finger := 8; finger {\/\/finger is declared in switch\n    case 1:\n        fmt.Println(\"Thumb\")\n    case 2:\n        fmt.Println(\"Index\")\n    case 3:\n        fmt.Println(\"Middle\")\n    case 4:\n        fmt.Println(\"Ring\")\n    case 5:\n        fmt.Println(\"Pinky\")\n    default: \/\/default case\n        fmt.Println(\"incorrect finger number\")\n    }\n}\n```\n\n在上面的程序中，`finger` 的值为 8，它不匹配任何 case，因此打印 `incorrect finger number`。default 语句不必放在 switch 语句的最后，而可以放在 switch 语句的任何位置。  \n\n你也许发现了另外一个小的改变，就是将 finger 声明在了 switch 语句中。switch 语句可以包含一个可选的语句，该语句在表达式求值之前执行。在` switch finger := 8`; `finger` 这一行中， `finger` 首先被声明，然后作为表达式被求值。这种方式（译者注：在 switch 语句中声明变量的方式）声明的 finger 只能在 switch 语句中访问。  \n\n## 包含多个表达式的 case  \n\n可以在一个 case 中包含多个表达式，每个表达式用逗号分隔。  \n\n```golang\npackage main\n\nimport (  \n    \"fmt\"\n)\n\nfunc main() {  \n    letter := \"i\"\n    switch letter {\n    case \"a\", \"e\", \"i\", \"o\", \"u\": \/\/multiple expressions in case\n        fmt.Println(\"vowel\")\n    default:\n        fmt.Println(\"not a vowel\")\n    }\n}\n```\n\n上面的程序检测 letter 是否是元音。`case \"a\", \"e\", \"i\", \"o\", \"u\":` 这一行匹配所有的元音。程序的输出为：`vowel`。  \n\n## 没有表达式的 switch  \n\nswitch 中的表达式是可选的，可以省略。如果省略表达式，则相当于` switch true`，这种情况下会将对每一个 case 的表达式的求值结果与 true 做比较，如果相等，则执行相应的代码。   \n\n```golang\npackage main\n\nimport (  \n    \"fmt\"\n)\n\nfunc main() {  \n    num := 75\n    switch { \/\/ expression is omitted\n    case num >= 0 && num <= 50:\n        fmt.Println(\"num is greater than 0 and less than 50\")\n    case num >= 51 && num <= 100:\n        fmt.Println(\"num is greater than 51 and less than 100\")\n    case num >= 101:\n        fmt.Println(\"num is greater than 100\")\n    }\n}\n```\n\n在上面的程序中，switch 后面没有表达式因此被认为是` switch true `并对每一个 case 表达式的求值结果与 true 做比较。`case num >= 51 && num <= 100:` 的求值结果为 `true`，因此程序输出：`num is greater than 51 and less than 100`。这种类型的 switch 语句可以替代多重 if else 子句。   \n\n## fallthrough  \n\n在 Go 中执行完一个 case 之后会立即退出 switch 语句。`fallthrough`语句用于标明执行完当前 case 语句之后按顺序执行下一个case 语句。  \n\n让我们写一个程序来了解 `fallthrough`。下面的程序检测 `number` 是否小于 50、100 或 200。列如：如果我们输入75，程序将打印 75 小于 100 和 200，这是通过 `fallthrough` 语句实现的。   \n\n```golang\npackage main\n\nimport (  \n    \"fmt\"\n)\n\nfunc number() int {  \n        num := 15 * 5 \n        return num\n}\n\nfunc main() {\n\n    switch num := number(); { \/\/num is not a constant\n    case num < 50:\n        fmt.Printf(\"%d is lesser than 50\\n\", num)\n        fallthrough\n    case num < 100:\n        fmt.Printf(\"%d is lesser than 100\\n\", num)\n        fallthrough\n    case num < 200:\n        fmt.Printf(\"%d is lesser than 200\", num)\n    }\n}\n```\n\nswitch 与 case 中的表达式不必是常量，他们也可以在运行时被求值。在上面的程序中 num 初始化为函数 number() 的返回值。程序首先对 switch 中的表达式求值，然后依次对每一个case 中的表达式求值并与 true 做匹配。匹配到 `case num < 100:` 时结果是 true，因此程序打印：`75 is lesser than 100`，接着程序遇到 `fallthrough` 语句，因此继续对下一个 case 中的表达式求值并与 true 做匹配，结果仍然是 true，因此打印：`75 is lesser than 200`。最后的输出如下：   \n\n```golang\n75 is lesser than 100  \n75 is lesser than 200 \n```\n\n`fallthrough` 必须是 case 语句块中的最后一条语句。如果它出现在语句块的中间，编译器将会报错：`fallthrough statement out of place`。  \n\n还有一种 switch 语句叫做 `type switch`，我们将在学习接口时介绍它。  \n\n希望你喜欢阅读。请留下宝贵的意见和反馈:)  ","meta":{"mtime":""}}}
</script>

    <script src="../tmp/book/624c24de5f335/asset/lodash/lodash.min.js?v=4.17.21"></script>

    <script src="../tmp/book/624c24de5f335/asset/react/react.production.min.js?v=17.0.2"></script>

    <script src="../tmp/book/624c24de5f335/asset/react-dom/react-dom.production.min.js?v=17.0.2"></script>

    <script src="../tmp/book/624c24de5f335/asset/reader/index.js?v=1.0.24"></script>

    <script src="../tmp/book/624c24de5f335/asset/plugins/comment/index.js?v=0.0.1"></script>

    <script src="../tmp/book/624c24de5f335/asset/plugins/highlight/index.js?v=1.0.0"></script>

    <script src="../tmp/book/624c24de5f335/asset/plugins/theme-classic/index.js?v=1.0.2"></script>

<script type="text/javascript">
    TopWrite.bootstrap();
</script>
</body>
</html>
